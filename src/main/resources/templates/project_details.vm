#parse('templates/layout.vm')

#set($title = 'Milestones')

#@mainLayout()
    #parse("templates/form_helpers.vm")

<a onload='location.href="#defaultLoadLocation"'></a>
<button id="addEventBtn" class="createMilestone" data-id="$model.projectId">&#43;</button>

<div class="header">
    <div class="milestoneHeaderSection">
        <div class=""><h3><strong>$model.getProjectName()</strong></h3></div>
        <hr class="headerHR"/>
        <div id="headerIcons">
            <div class="headerIcon"><a href="/projects"><i class="fas fa-arrow-left fa-lg"></i></a></div>
            <div class="headerIcon"><a href="#"><i class="fas fa-share-alt-square fa-lg"></i></a></div>
        </div>
    </div>
</div>

<div class="milestoneContent">
    <div class="timeline">


        #if($model.getDoneMilestones())
            <br />
            <div class="timelineIndicatorContainer">
                <p><strong><i>Done</i></strong></p>
                <hr  class="timelineIndicator"/>
            </div>

        #end

        #foreach($milestone in $model.getDoneMilestones())
            <div class="timelineContent done">
                <button class="wAccordion">
                    <strong>$milestone.name:</strong> $milestone.due
                </button>
                <div class="wPanel">
                    <br />

                    <p>This milestone was completed two days early. Nice! Hard coded!</p>
                    <hr />


                    <form method="post">

                            <input type="hidden" value="$milestone.id" name="milestoneId">
                            <input type="hidden" value="markedUnDoneForm" name="formType">
                        ##<div class="container33">
                        ##    <a href="#"><i class="far fa-check-circle fa-2x"></i></a>
                        ##</div>
                        <div class="container33">

                            <button type="submit" class="btn btn-primary" title="Mark as Undone">
                                <i class="far fa-check-circle fa-2x"></i>
                            </button>
                        </div>

                        ##<div class="container33">
                        ##    <input type="submit" value="Mark as UnDone" class="btn btn-default" id="smt">
                        ##</div>
                    </form>



                    <div class="container33">
                        <a class="editMilestoneLink" data-id="$milestone.id" id ="editMilestoneBtn" ><i class="fas fa-pencil-alt fa-2x"></i></a>
                    </div>
                    <div class="container33">
                        <a class="deleteMilestoneLink" data-id="$milestone.id"><i class="fas fa-times fa-2x"></i></a>
                    </div>
                </div>
            </div>
            <br/>
        #end




        #if($model.getLateMilestones())

            <br />
            <div class="timelineIndicatorContainer">
                <p><strong><i>Late</i></strong></p>
                <hr  class="timelineIndicator"/>
            </div>

        #end

    #foreach($milestone in $model.getLateMilestones())
        <div class="timelineContent late">
            <button class="wAccordion">
                <strong>$milestone.name:</strong> $milestone.due
            </button>
            <div class="wPanel">
                <br />


                <form method="post">
                    ##<input type="hidden" name="antiForgeryToken" value="$antiForgeryHelper.generateToken()">
                    ##antiForgeryToken()


                    ##form_text_input("milestoneId", $milestone.id)
                        <input type="hidden" value="$milestone.id" name="milestoneId">
                        <input type="hidden" value="markedDoneForm" name="formType">

                    ## Use a form helper to output a text input.
                    <div class="container33">
                        <button type="submit" class="btn btn-primary" title="Mark as Done">
                            <i class="fas fa-check-circle fa-2x"></i>
                        </button>
                    </div>
                </form>

                <div class="container33">
                    <a class="editMilestoneLink" data-id="$milestone.id" id ="editMilestoneBtn" ><i class="fas fa-pencil-alt fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a class="deleteMilestoneLink" data-id="$milestone.id"><i class="fas fa-times fa-2x"></i></a>
                </div>
            </div>
        </div>
        <br/>
    #end






<a href="#" id="defaultLoadLocation"></a>


    #if($model.getCurrentMilestones())
        <br />
        <div class="timelineIndicatorContainer">
            <p><strong><i>Current Week</i></strong></p>
            <hr  class="timelineIndicator"/>
        </div>
    #end
        #foreach($milestone in $model.getCurrentMilestones())



                <div class="timelineContent dueToday">
                    <button class="wAccordion">
                        <strong>$milestone.name:</strong> $milestone.due
                    </button>
                    <div class="wPanel">
                        <br />


                        <form method="post">
                            ##<input type="hidden" name="antiForgeryToken" value="$antiForgeryHelper.generateToken()">
                            ##antiForgeryToken()

                                <input type="hidden" value="$milestone.id" name="milestoneId">
                                <input type="hidden" value="markedDoneForm" name="formType">


                            ##form_text_input("milestoneId", $milestone.id)
                            <div class="container33">
                                <button type="submit" class="btn btn-primary" title="Mark as Done">
                                    <i class="fas fa-check-circle fa-2x"></i>
                                </button>
                            </div>
                        </form>


                        <div class="container33">
                            <a class="editMilestoneLink" data-id="$milestone.id" id ="editMilestoneBtn" ><i class="fas fa-pencil-alt fa-2x"></i></a>
                        </div>
                        <div class="container33">
                            <a class="deleteMilestoneLink" data-id="$milestone.id"><i class="fas fa-times fa-2x"></i></a>
                        </div>
                    </div>
                </div>
                <br/>

        #end


    #if($model.getUpcomingMilestones())

        <br />
        <div class="timelineIndicatorContainer">
            <p><strong><i>Upcoming</i></strong></p>
            <hr class="timelineIndicator"/>
        </div>
    #end

    #foreach($milestone in $model.getUpcomingMilestones())



            <div class="timelineContent upcoming">
                <button class="wAccordion">
                    <strong>$milestone.name:</strong> $milestone.due
                </button>
                <div class="wPanel">
                    <br />

                    <form method="post">
                        ##antiForgeryToken()

                           ## <input type="hidden" name="antiForgeryToken" value="$antiForgeryHelper.generateToken()">
                        <input type="hidden" value="$milestone.id" name="milestoneId">
                        ##form_text_input("milestoneId", $milestone.id)
                            <input type="hidden" value="markedDoneForm" name="formType">

                        <div class="container33">
                            <button type="submit" class="btn btn-primary" title="Mark as Done">
                                <i class="fas fa-check-circle fa-2x"></i>
                            </button>
                        </div>
                    </form>



                    <div class="container33">
                        <a class="editMilestoneLink" data-id="$milestone.id" id ="editMilestoneBtn" ><i class="fas fa-pencil-alt fa-2x"></i></a>
                    </div>
                    <div class="container33">
                        <a class="deleteMilestoneLink" data-id="$milestone.id"><i class="fas fa-times fa-2x"></i></a>
                    </div>
                </div>
            </div>
            <br/>

    #end






            <script>


            $(function() {
                $('.deleteMilestoneLink').click(function () {
                    var milestoneId = $(this).attr('data-id');
                    location.href = '/milestone/delete?id=' + milestoneId;
                });
            });

            $(function() {
                $('.editMilestoneLink').click(function () {
                    var milestoneId = $(this).attr('data-id');
                    location.href = '/milestone/edit?id=' + milestoneId;
                });
            });

        </script>





        <!-- Late Milestones


        <div class="timelineIndicatorContainer">
            <p><strong><i>Late</i></strong></p>
            <hr  class="timelineIndicator"/>
        </div>

        <div class="timelineContent late">
            <button class="wAccordion">
                <strong>Complete Project Plan: 12/04/2018</strong>
            </button>
            <div class="wPanel">

                <div class="container33">
                    <a href="#"><i class="far fa-check-circle fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#" id ="editMilestoneBtn" ><i class="fas fa-pencil-alt fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#"><i class="fas fa-times fa-2x"></i></a>
                </div>
            </div>
        </div>
        <br/>

        <div class="timelineContent late">
            <button class="wAccordion">
                <strong>Complete Project Plan: 12/04/2018</strong>
            </button>
            <div class="wPanel">
                <br />
                <p>This milestone was completed two days early. Nice!</p>
                <hr />
                <div class="container33">
                    <a href="#"><i class="fas fa-check-circle fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#" id ="editMilestoneBtn" ><i class="fas fa-pencil-alt fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#"><i class="fas fa-times fa-2x"></i></a>
                </div>
            </div>
        </div>
        <br/>




        <div class="timelineIndicatorContainer">
            <p><strong><i>Due Today</i></strong></p>
            <hr  class="timelineIndicator"/>
        </div>


        <div class="timelineContent dueToday">
            <button class="wAccordion">
                <strong>Complete Project Plan: 12/04/2018</strong>
            </button>
            <div class="wPanel">
                <br />
                <p>This milestone was completed two days early. Nice!</p>
                <hr />
                <div class="container33">
                    <a href="#"><i class="far fa-check-circle fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#" id ="editMilestoneBtn" ><i class="fas fa-pencil-alt fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#"><i class="fas fa-times fa-2x"></i></a>
                </div>
            </div>
        </div>
        <br/>


        <div class="timelineContent dueToday">
            <button class="wAccordion">
                <strong>Complete Project Plan: 12/04/2018</strong>
            </button>
            <div class="wPanel">
                <br />
                <p>This milestone was completed two days early. Nice!</p>
                <hr />
                <div class="container33">
                    <a href="#"><i class="far fa-check-circle fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#" id ="editMilestoneBtn" ><i class="fas fa-pencil-alt fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#"><i class="fas fa-times fa-2x"></i></a>
                </div>
            </div>
        </div>
        <br/>

        <div class="timelineContent dueToday">
            <button class="wAccordion">
                <strong>Complete Project Plan: 12/04/2018</strong>
            </button>
            <div class="wPanel">
                <br />
                <p>This milestone was completed two days early. Nice!</p>
                <hr />
                <div class="container33">
                    <a href="#"><i class="far fa-check-circle fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#" id ="editMilestoneBtn" ><i class="fas fa-pencil-alt fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#"><i class="fas fa-times fa-2x"></i></a>
                </div>
            </div>
        </div>
        <br/>



        <!-- Upcoming Milestones -- >

        <div class="timelineIndicatorContainer">
            <p><strong><i>Upcoming</i></strong></p>
            <hr  class="timelineIndicator"/>
        </div>

        <div class="timelineContent upcoming">
            <button class="wAccordion">
                <strong>Complete Project Plan: 12/04/2018</strong>
            </button>
            <div class="wPanel">
                <br />
                <p>This milestone was completed two days early. Nice!</p>
                <hr />
                <div class="container33">
                    <a href="#"><i class="far fa-check-circle fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#" id ="editMilestoneBtn" ><i class="fas fa-pencil-alt fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#"><i class="fas fa-times fa-2x"></i></a>
                </div>
            </div>
        </div>
        <br/>

        <div class="timelineContent upcoming">
            <button class="wAccordion">
                <strong>Complete Project Plan: 12/04/2018</strong>
            </button>
            <div class="wPanel">
                <br />
                <p>This milestone was completed two days early. Nice!</p>
                <hr />
                <div class="container33">
                    <a href="#"><i class="far fa-check-circle fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#" id ="editMilestoneBtn" ><i class="fas fa-pencil-alt fa-2x"></i></a>
                </div>
                <div class="container33">
                    <a href="#"><i class="fas fa-times fa-2x"></i></a>
                </div>
            </div>
        </div>
        <br/>

-->



    </div>


</div>



<script>
    $(function() {
        $('.createMilestone').click(function () {
            var projectId = $(this).attr('data-id');
            location.href = '/milestone/create?id=' + projectId;
        });
    });
</script>



<!-- Each milestone is in a tabd/accordian section.  -->
<script>
    var acc = document.getElementsByClassName("wAccordion");
    var i;

    for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function() {
            this.classList.toggle("wActive");
            var panel = this.nextElementSibling;
            if (panel.style.display === "block") {
                panel.style.display = "none";
            } else {
                panel.style.display = "block";
            }
        });
    }
</script>











#end